name: CI

on: [ push ]

jobs:
  backend_quality_check:
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v2
      - uses: nanasess/setup-php@master
        with:
          php-version: '8.1'
      - name: install dependencies
        run: composer install --no-interaction
      - name: codestyle
        run: ./vendor/bin/phpcs
      - name: static analyze
        run: ./vendor/bin/phpstan
      - name: tests
        run: ./vendor/bin/phpunit
  frontend_quality_check:
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - name: Install dependencies
        working-directory: frontend
        run: npm ci
      - name: Codestyle
        working-directory: frontend
        run: npm run lint
